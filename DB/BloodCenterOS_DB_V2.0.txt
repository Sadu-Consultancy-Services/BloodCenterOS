-- 1. User & Access Management
CREATE TABLE AppUserMaster (
    AppUserId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    Username NVARCHAR(50) NOT NULL,
    PasswordHash NVARCHAR(256) NOT NULL,
    Email NVARCHAR(100),
    Phone NVARCHAR(15),
    FirstName NVARCHAR(50),
    LastName NVARCHAR(50),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_AppUserMaster PRIMARY KEY CLUSTERED (AppUserId),
    INDEX IX_AppUserMaster_CenterId NONCLUSTERED (CenterId),
    INDEX IX_AppUserMaster_Username NONCLUSTERED (Username),
    INDEX IX_AppUserMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_AppUserMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE RoleMaster (
    RoleId BIGINT IDENTITY(1,1) NOT NULL,
    RoleName NVARCHAR(50) NOT NULL,
    Details NVARCHAR(MAX),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_RoleMaster PRIMARY KEY CLUSTERED (RoleId),
    INDEX IX_RoleMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_RoleMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE AppUserRoleMap (
    AppUserRoleMapId BIGINT IDENTITY(1,1) NOT NULL,
    AppUserId BIGINT NOT NULL,
    RoleId BIGINT NOT NULL,
    CenterId BIGINT NOT NULL,
    AssignedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_AppUserRoleMap PRIMARY KEY CLUSTERED (AppUserRoleMapId),
    INDEX IX_AppUserRoleMap_AppUserId NONCLUSTERED (AppUserId),
    INDEX IX_AppUserRoleMap_RoleId NONCLUSTERED (RoleId),
    INDEX IX_AppUserRoleMap_CenterId NONCLUSTERED (CenterId),
    INDEX IX_AppUserRoleMap_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_AppUserRoleMap_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE LoginHistory (
    LoginHistoryId BIGINT IDENTITY(1,1) NOT NULL,
    AppUserId BIGINT NOT NULL,
    CenterId BIGINT NOT NULL,
    LoginTime DATETIME2 DEFAULT SYSUTCDATETIME(),
    IpAddress NVARCHAR(45),
    DeviceInfo NVARCHAR(255),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_LoginHistory PRIMARY KEY CLUSTERED (LoginHistoryId),
    INDEX IX_LoginHistory_AppUserId NONCLUSTERED (AppUserId),
    INDEX IX_LoginHistory_CenterId NONCLUSTERED (CenterId),
    INDEX IX_LoginHistory_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_LoginHistory_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE AuditLog (
    AuditLogId BIGINT IDENTITY(1,1) NOT NULL,
    AppUserId BIGINT NOT NULL,
    CenterId BIGINT NOT NULL,
    Action NVARCHAR(100) NOT NULL,
    EntityName NVARCHAR(50),
    EntityId BIGINT,
    ActionTime DATETIME2 DEFAULT SYSUTCDATETIME(),
    Details NVARCHAR(MAX),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_AuditLog PRIMARY KEY CLUSTERED (AuditLogId),
    INDEX IX_AuditLog_AppUserId NONCLUSTERED (AppUserId),
    INDEX IX_AuditLog_CenterId NONCLUSTERED (CenterId),
    INDEX IX_AuditLog_ActionTime NONCLUSTERED (ActionTime),
    INDEX IX_AuditLog_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_AuditLog_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE PermissionMaster (
    PermissionId BIGINT IDENTITY(1,1) NOT NULL,
    PermissionName NVARCHAR(50) NOT NULL,
    Details NVARCHAR(MAX),
    Module NVARCHAR(50),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_PermissionMaster PRIMARY KEY CLUSTERED (PermissionId),
    INDEX IX_PermissionMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_PermissionMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE RolePermissionMap (
    RolePermissionMapId BIGINT IDENTITY(1,1) NOT NULL,
    RoleId BIGINT NOT NULL,
    PermissionId BIGINT NOT NULL,
    AssignedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_RolePermissionMap PRIMARY KEY CLUSTERED (RolePermissionMapId),
    INDEX IX_RolePermissionMap_RoleId NONCLUSTERED (RoleId),
    INDEX IX_RolePermissionMap_PermissionId NONCLUSTERED (PermissionId),
    INDEX IX_RolePermissionMap_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_RolePermissionMap_UpdatedBy NONCLUSTERED (UpdatedBy)
);

-- 2. Blood Center & Infrastructure
CREATE TABLE BloodCenterMaster (
    CenterId BIGINT IDENTITY(1,1) NOT NULL,
    CenterName NVARCHAR(100) NOT NULL,
    Location NVARCHAR(MAX),
    CityId BIGINT,
    Phone NVARCHAR(15),
    Email NVARCHAR(100),
    LicenseNumber NVARCHAR(50),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_BloodCenterMaster PRIMARY KEY CLUSTERED (CenterId),
    INDEX IX_BloodCenterMaster_CityId NONCLUSTERED (CityId),
    INDEX IX_BloodCenterMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_BloodCenterMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE BranchMaster (
    BranchId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    BranchName NVARCHAR(100) NOT NULL,
    Location NVARCHAR(MAX),
    CityId BIGINT,
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_BranchMaster PRIMARY KEY CLUSTERED (BranchId),
    INDEX IX_BranchMaster_CenterId NONCLUSTERED (CenterId),
    INDEX IX_BranchMaster_CityId NONCLUSTERED (CityId),
    INDEX IX_BranchMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_BranchMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE DepartmentMaster (
    DepartmentId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    DepartmentName NVARCHAR(50) NOT NULL,
    Details NVARCHAR(MAX),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_DepartmentMaster PRIMARY KEY CLUSTERED (DepartmentId),
    INDEX IX_DepartmentMaster_CenterId NONCLUSTERED (CenterId),
    INDEX IX_DepartmentMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_DepartmentMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE EmployeeMaster (
    EmployeeId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    AppUserId BIGINT, -- Links to AppUserMaster for login
    DepartmentId BIGINT,
    DesignationId BIGINT,
    FirstName NVARCHAR(50),
    LastName NVARCHAR(50),
    Email NVARCHAR(100),
    Phone NVARCHAR(15),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_EmployeeMaster PRIMARY KEY CLUSTERED (EmployeeId),
    INDEX IX_EmployeeMaster_CenterId NONCLUSTERED (CenterId),
    INDEX IX_EmployeeMaster_AppUserId NONCLUSTERED (AppUserId),
    INDEX IX_EmployeeMaster_DepartmentId NONCLUSTERED (DepartmentId),
    INDEX IX_EmployeeMaster_DesignationId NONCLUSTERED (DesignationId),
    INDEX IX_EmployeeMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_EmployeeMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE DesignationMaster (
    DesignationId BIGINT IDENTITY(1,1) NOT NULL,
    DesignationName NVARCHAR(50) NOT NULL,
    Details NVARCHAR(MAX),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_DesignationMaster PRIMARY KEY CLUSTERED (DesignationId),
    INDEX IX_DesignationMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_DesignationMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE DeviceMaster (
    DeviceId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    DeviceName NVARCHAR(100) NOT NULL,
    DeviceCategory NVARCHAR(50),
    SerialNumber NVARCHAR(50),
    CalibrationRecordDate DATE,
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_DeviceMaster PRIMARY KEY CLUSTERED (DeviceId),
    INDEX IX_DeviceMaster_CenterId NONCLUSTERED (CenterId),
    INDEX IX_DeviceMaster_SerialNumber NONCLUSTERED (SerialNumber),
    INDEX IX_DeviceMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_DeviceMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE FridgeStorageMaster (
    FridgeId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    FridgeName NVARCHAR(50) NOT NULL,
    Location NVARCHAR(100),
    Capacity INT,
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_FridgeStorageMaster PRIMARY KEY CLUSTERED (FridgeId),
    INDEX IX_FridgeStorageMaster_CenterId NONCLUSTERED (CenterId),
    INDEX IX_FridgeStorageMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_FridgeStorageMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE LookupCategory (
    LookupCategoryId BIGINT IDENTITY(1,1) NOT NULL,
    CategoryName NVARCHAR(50) NOT NULL,
    Details NVARCHAR(MAX),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_LookupCategory PRIMARY KEY CLUSTERED (LookupCategoryId),
    INDEX IX_LookupCategory_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_LookupCategory_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE LookupValue (
    LookupValueId BIGINT IDENTITY(1,1) NOT NULL,
    LookupCategoryId BIGINT NOT NULL,
    ValueName NVARCHAR(50) NOT NULL,
    DisplayOrder INT,
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_LookupValue PRIMARY KEY CLUSTERED (LookupValueId),
    INDEX IX_LookupValue_LookupCategoryId NONCLUSTERED (LookupCategoryId),
    INDEX IX_LookupValue_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_LookupValue_UpdatedBy NONCLUSTERED (UpdatedBy)
);

-- 3. Donor Management
CREATE TABLE DonorMaster (
    DonorId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    FirstName NVARCHAR(50),
    LastName NVARCHAR(50),
    BloodGroupId BIGINT,
    BirthDate DATE,
    Gender NVARCHAR(10),
    Phone NVARCHAR(15),
    Email NVARCHAR(100),
    Location NVARCHAR(MAX),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_DonorMaster PRIMARY KEY CLUSTERED (DonorId),
    INDEX IX_DonorMaster_CenterId NONCLUSTERED (CenterId),
    INDEX IX_DonorMaster_BloodGroupId NONCLUSTERED (BloodGroupId),
    INDEX IX_DonorMaster_Phone NONCLUSTERED (Phone),
    INDEX IX_DonorMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_DonorMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE DonorHealthHistory (
    HealthHistoryId BIGINT IDENTITY(1,1) NOT NULL,
    DonorId BIGINT NOT NULL,
    CenterId BIGINT NOT NULL,
    ScreeningRecordDate DATETIME2 DEFAULT SYSUTCDATETIME(),
    HealthDetails NVARCHAR(MAX),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_DonorHealthHistory PRIMARY KEY CLUSTERED (HealthHistoryId),
    INDEX IX_DonorHealthHistory_DonorId NONCLUSTERED (DonorId),
    INDEX IX_DonorHealthHistory_CenterId NONCLUSTERED (CenterId),
    INDEX IX_DonorHealthHistory_ScreeningRecordDate NONCLUSTERED (ScreeningRecordDate),
    INDEX IX_DonorHealthHistory_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_DonorHealthHistory_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE DonorDonationHistory (
    DonationHistoryId BIGINT IDENTITY(1,1) NOT NULL,
    DonorId BIGINT NOT NULL,
    CenterId BIGINT NOT NULL,
    DonationRecordDate DATETIME2 DEFAULT SYSUTCDATETIME(),
    BloodBagNumber NVARCHAR(50) NOT NULL,
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_DonorDonationHistory PRIMARY KEY CLUSTERED (DonationHistoryId),
    INDEX IX_DonorDonationHistory_DonorId NONCLUSTERED (DonorId),
    INDEX IX_DonorDonationHistory_CenterId NONCLUSTERED (CenterId),
    INDEX IX_DonorDonationHistory_BloodBagNumber NONCLUSTERED (BloodBagNumber),
    INDEX IX_DonorDonationHistory_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_DonorDonationHistory_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE DeferralRecord (
    DeferralId BIGINT IDENTITY(1,1) NOT NULL,
    DonorId BIGINT NOT NULL,
    CenterId BIGINT NOT NULL,
    ReasonId BIGINT,
    DeferralStartRecordDate DATE,
    DeferralEndRecordDate DATE,
    IsPermanent BIT DEFAULT 0,
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_DeferralRecord PRIMARY KEY CLUSTERED (DeferralId),
    INDEX IX_DeferralRecord_DonorId NONCLUSTERED (DonorId),
    INDEX IX_DeferralRecord_CenterId NONCLUSTERED (CenterId),
    INDEX IX_DeferralRecord_ReasonId NONCLUSTERED (ReasonId),
    INDEX IX_DeferralRecord_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_DeferralRecord_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE DonorAppointment (
    AppointmentId BIGINT IDENTITY(1,1) NOT NULL,
    DonorId BIGINT NOT NULL,
    CenterId BIGINT NOT NULL,
    AppointmentRecordDate DATETIME2,
    Status NVARCHAR(20),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_DonorAppointment PRIMARY KEY CLUSTERED (AppointmentId),
    INDEX IX_DonorAppointment_DonorId NONCLUSTERED (DonorId),
    INDEX IX_DonorAppointment_CenterId NONCLUSTERED (CenterId),
    INDEX IX_DonorAppointment_AppointmentRecordDate NONCLUSTERED (AppointmentRecordDate),
    INDEX IX_DonorAppointment_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_DonorAppointment_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE DonorCommunicationLog (
    CommunicationId BIGINT IDENTITY(1,1) NOT NULL,
    DonorId BIGINT NOT NULL,
    CenterId BIGINT NOT NULL,
    CommunicationCategory NVARCHAR(20),
    MessageContent NVARCHAR(MAX),
    SentAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_DonorCommunicationLog PRIMARY KEY CLUSTERED (CommunicationId),
    INDEX IX_DonorCommunicationLog_DonorId NONCLUSTERED (DonorId),
    INDEX IX_DonorCommunicationLog_CenterId NONCLUSTERED (CenterId),
    INDEX IX_DonorCommunicationLog_SentAt NONCLUSTERED (SentAt),
    INDEX IX_DonorCommunicationLog_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_DonorCommunicationLog_UpdatedBy NONCLUSTERED (UpdatedBy)
);

-- 4. Blood Camps & Collection
CREATE TABLE BloodCampMaster (
    CampId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    CampName NVARCHAR(100) NOT NULL,
    OrganizerId BIGINT,
    Venue NVARCHAR(MAX),
    CampRecordDate DATE,
    Status NVARCHAR(20),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_BloodCampMaster PRIMARY KEY CLUSTERED (CampId),
    INDEX IX_BloodCampMaster_CenterId NONCLUSTERED (CenterId),
    INDEX IX_BloodCampMaster_OrganizerId NONCLUSTERED (OrganizerId),
    INDEX IX_BloodCampMaster_CampRecordDate NONCLUSTERED (CampRecordDate),
    INDEX IX_BloodCampMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_BloodCampMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE CampOrganizer (
    OrganizerId BIGINT IDENTITY(1,1) NOT NULL,
    OrganizerName NVARCHAR(100) NOT NULL,
    ContactPerson NVARCHAR(50),
    Phone NVARCHAR(15),
    Email NVARCHAR(100),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_CampOrganizer PRIMARY KEY CLUSTERED (OrganizerId),
    INDEX IX_CampOrganizer_OrganizerName NONCLUSTERED (OrganizerName),
    INDEX IX_CampOrganizer_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_CampOrganizer_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE CampDonorMap (
    CampDonorMapId BIGINT IDENTITY(1,1) NOT NULL,
    CampId BIGINT NOT NULL,
    DonorId BIGINT NOT NULL,
    CenterId BIGINT NOT NULL,
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_CampDonorMap PRIMARY KEY CLUSTERED (CampDonorMapId),
    INDEX IX_CampDonorMap_CampId NONCLUSTERED (CampId),
    INDEX IX_CampDonorMap_DonorId NONCLUSTERED (DonorId),
    INDEX IX_CampDonorMap_CenterId NONCLUSTERED (CenterId),
    INDEX IX_CampDonorMap_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_CampDonorMap_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE CollectionRecord (
    CollectionId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    DonorId BIGINT NOT NULL,
    CampId BIGINT,
    BloodBagNumber NVARCHAR(50) NOT NULL,
    CollectionRecordDate DATETIME2 DEFAULT SYSUTCDATETIME(),
    Volume INT,
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_CollectionRecord PRIMARY KEY CLUSTERED (CollectionId),
    INDEX IX_CollectionRecord_CenterId NONCLUSTERED (CenterId),
    INDEX IX_CollectionRecord_DonorId NONCLUSTERED (DonorId),
    INDEX IX_CollectionRecord_CampId NONCLUSTERED (CampId),
    INDEX IX_CollectionRecord_BloodBagNumber NONCLUSTERED (BloodBagNumber),
    INDEX IX_CollectionRecord_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_CollectionRecord_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE CollectionStaffMap (
    CollectionStaffMapId BIGINT IDENTITY(1,1) NOT NULL,
    CollectionId BIGINT NOT NULL,
    EmployeeId BIGINT NOT NULL,
    CenterId BIGINT NOT NULL,
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_CollectionStaffMap PRIMARY KEY CLUSTERED (CollectionStaffMapId),
    INDEX IX_CollectionStaffMap_CollectionId NONCLUSTERED (CollectionId),
    INDEX IX_CollectionStaffMap_EmployeeId NONCLUSTERED (EmployeeId),
    INDEX IX_CollectionStaffMap_CenterId NONCLUSTERED (CenterId),
    INDEX IX_CollectionStaffMap_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_CollectionStaffMap_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE CampInventory (
    CampInventoryId BIGINT IDENTITY(1,1) NOT NULL,
    CampId BIGINT NOT NULL,
    CenterId BIGINT NOT NULL,
    ItemName NVARCHAR(100),
    Quantity INT,
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_CampInventory PRIMARY KEY CLUSTERED (CampInventoryId),
    INDEX IX_CampInventory_CampId NONCLUSTERED (CampId),
    INDEX IX_CampInventory_CenterId NONCLUSTERED (CenterId),
    INDEX IX_CampInventory_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_CampInventory_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE CampExpenseLog (
    CampExpenseId BIGINT IDENTITY(1,1) NOT NULL,
    CampId BIGINT NOT NULL,
    CenterId BIGINT NOT NULL,
    ExpenseCategory NVARCHAR(50),
    Amount DECIMAL(10,2),
    ExpenseRecordDate DATE,
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_CampExpenseLog PRIMARY KEY CLUSTERED (CampExpenseId),
    INDEX IX_CampExpenseLog_CampId NONCLUSTERED (CampId),
    INDEX IX_CampExpenseLog_CenterId NONCLUSTERED (CenterId),
    INDEX IX_CampExpenseLog_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_CampExpenseLog_UpdatedBy NONCLUSTERED (UpdatedBy)
);

-- 5. Blood Testing & Screening
CREATE TABLE BloodTestRecord (
    TestRecordId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    BloodBagNumber NVARCHAR(50) NOT NULL,
    TestRecordDate DATETIME2 DEFAULT SYSUTCDATETIME(),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_BloodTestRecord PRIMARY KEY CLUSTERED (TestRecordId),
    INDEX IX_BloodTestRecord_CenterId NONCLUSTERED (CenterId),
    INDEX IX_BloodTestRecord_BloodBagNumber NONCLUSTERED (BloodBagNumber),
    INDEX IX_BloodTestRecord_TestRecordDate NONCLUSTERED (TestRecordDate),
    INDEX IX_BloodTestRecord_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_BloodTestRecord_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE TestResultDetail (
    TestResultId BIGINT IDENTITY(1,1) NOT NULL,
    TestRecordId BIGINT NOT NULL,
    ParameterName NVARCHAR(50),
    ResultValue NVARCHAR(50),
    IsNormal BIT,
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_TestResultDetail PRIMARY KEY CLUSTERED (TestResultId),
    INDEX IX_TestResultDetail_TestRecordId NONCLUSTERED (TestRecordId),
    INDEX IX_TestResultDetail_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_TestResultDetail_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE TestKitMaster (
    TestKitId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    KitName NVARCHAR(100),
    ExpiryRecordDate DATE,
    BatchNumber NVARCHAR(50),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_TestKitMaster PRIMARY KEY CLUSTERED (TestKitId),
    INDEX IX_TestKitMaster_CenterId NONCLUSTERED (CenterId),
    INDEX IX_TestKitMaster_BatchNumber NONCLUSTERED (BatchNumber),
    INDEX IX_TestKitMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_TestKitMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE TestTechnicianMap (
    TestTechnicianMapId BIGINT IDENTITY(1,1) NOT NULL,
    TestRecordId BIGINT NOT NULL,
    EmployeeId BIGINT NOT NULL,
    CenterId BIGINT NOT NULL,
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_TestTechnicianMap PRIMARY KEY CLUSTERED (TestTechnicianMapId),
    INDEX IX_TestTechnicianMap_TestRecordId NONCLUSTERED (TestRecordId),
    INDEX IX_TestTechnicianMap_EmployeeId NONCLUSTERED (EmployeeId),
    INDEX IX_TestTechnicianMap_CenterId NONCLUSTERED (CenterId),
    INDEX IX_TestTechnicianMap_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_TestTechnicianMap_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE QualityControlRecord (
    QCRecordId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    DeviceId BIGINT,
    QCRecordDate DATETIME2 DEFAULT SYSUTCDATETIME(),
    Result NVARCHAR(MAX),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_QualityControlRecord PRIMARY KEY CLUSTERED (QCRecordId),
    INDEX IX_QualityControlRecord_CenterId NONCLUSTERED (CenterId),
    INDEX IX_QualityControlRecord_DeviceId NONCLUSTERED (DeviceId),
    INDEX IX_QualityControlRecord_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_QualityControlRecord_UpdatedBy NONCLUSTERED (UpdatedBy)
);

-- 6. Component Preparation & Storage
CREATE TABLE ComponentPreparation (
    ComponentPrepId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    BloodBagNumber NVARCHAR(50) NOT NULL,
    ComponentCategoryId BIGINT,
    PrepRecordDate DATETIME2 DEFAULT SYSUTCDATETIME(),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_ComponentPreparation PRIMARY KEY CLUSTERED (ComponentPrepId),
    INDEX IX_ComponentPreparation_CenterId NONCLUSTERED (CenterId),
    INDEX IX_ComponentPreparation_BloodBagNumber NONCLUSTERED (BloodBagNumber),
    INDEX IX_ComponentPreparation_ComponentCategoryId NONCLUSTERED (ComponentCategoryId),
    INDEX IX_ComponentPreparation_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_ComponentPreparation_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE ComponentStorage (
    StorageId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    ComponentPrepId BIGINT NOT NULL,
    FridgeId BIGINT,
    StorageRecordDate DATETIME2 DEFAULT SYSUTCDATETIME(),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_ComponentStorage PRIMARY KEY CLUSTERED (StorageId),
    INDEX IX_ComponentStorage_CenterId NONCLUSTERED (CenterId),
    INDEX IX_ComponentStorage_ComponentPrepId NONCLUSTERED (ComponentPrepId),
    INDEX IX_ComponentStorage_FridgeId NONCLUSTERED (FridgeId),
    INDEX IX_ComponentStorage_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_ComponentStorage_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE ComponentTransferLog (
    TransferId BIGINT IDENTITY(1,1) NOT NULL,
    ComponentPrepId BIGINT NOT NULL,
    FromCenterId BIGINT NOT NULL,
    ToCenterId BIGINT NOT NULL,
    TransferRecordDate DATETIME2 DEFAULT SYSUTCDATETIME(),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_ComponentTransferLog PRIMARY KEY CLUSTERED (TransferId),
    INDEX IX_ComponentTransferLog_ComponentPrepId NONCLUSTERED (ComponentPrepId),
    INDEX IX_ComponentTransferLog_FromCenterId NONCLUSTERED (FromCenterId),
    INDEX IX_ComponentTransferLog_ToCenterId NONCLUSTERED (ToCenterId),
    INDEX IX_ComponentTransferLog_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_ComponentTransferLog_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE DiscardRecord (
    DiscardId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    ComponentPrepId BIGINT NOT NULL,
    ReasonId BIGINT,
    DiscardRecordDate DATETIME2 DEFAULT SYSUTCDATETIME(),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_DiscardRecord PRIMARY KEY CLUSTERED (DiscardId),
    INDEX IX_DiscardRecord_CenterId NONCLUSTERED (CenterId),
    INDEX IX_DiscardRecord_ComponentPrepId NONCLUSTERED (ComponentPrepId),
    INDEX IX_DiscardRecord_ReasonId NONCLUSTERED (ReasonId),
    INDEX IX_DiscardRecord_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_DiscardRecord_UpdatedBy NONCLUSTERED (UpdatedBy)
);

-- 7. Inventory & Issue Management
CREATE TABLE InventoryStock (
    StockId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    ComponentCategoryId BIGINT NOT NULL,
    BloodGroupId BIGINT NOT NULL,
    Quantity INT,
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_InventoryStock PRIMARY KEY CLUSTERED (StockId),
    INDEX IX_InventoryStock_CenterId NONCLUSTERED (CenterId),
    INDEX IX_InventoryStock_ComponentCategoryId NONCLUSTERED (ComponentCategoryId),
    INDEX IX_InventoryStock_BloodGroupId NONCLUSTERED (BloodGroupId),
    INDEX IX_InventoryStock_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_InventoryStock_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE IssueRecord (
    IssueId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    HospitalId BIGINT,
    ComponentPrepId BIGINT NOT NULL,
    IssueRecordDate DATETIME2 DEFAULT SYSUTCDATETIME(),
    Quantity INT,
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_IssueRecord PRIMARY KEY CLUSTERED (IssueId),
    INDEX IX_IssueRecord_CenterId NONCLUSTERED (CenterId),
    INDEX IX_IssueRecord_HospitalId NONCLUSTERED (HospitalId),
    INDEX IX_IssueRecord_ComponentPrepId NONCLUSTERED (ComponentPrepId),
    INDEX IX_IssueRecord_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_IssueRecord_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE HospitalMaster (
    HospitalId BIGINT IDENTITY(1,1) NOT NULL,
    HospitalName NVARCHAR(100) NOT NULL,
    Location NVARCHAR(MAX),
    CityId BIGINT,
    Phone NVARCHAR(15),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_HospitalMaster PRIMARY KEY CLUSTERED (HospitalId),
    INDEX IX_HospitalMaster_CityId NONCLUSTERED (CityId),
    INDEX IX_HospitalMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_HospitalMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE PatientRequest (
    RequestId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    HospitalId BIGINT,
    PatientName NVARCHAR(100),
    BloodGroupId BIGINT,
    ComponentCategoryId BIGINT,
    RequestRecordDate DATETIME2 DEFAULT SYSUTCDATETIME(),
    Status NVARCHAR(20),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_PatientRequest PRIMARY KEY CLUSTERED (RequestId),
    INDEX IX_PatientRequest_CenterId NONCLUSTERED (CenterId),
    INDEX IX_PatientRequest_HospitalId NONCLUSTERED (HospitalId),
    INDEX IX_PatientRequest_BloodGroupId NONCLUSTERED (BloodGroupId),
    INDEX IX_PatientRequest_ComponentCategoryId NONCLUSTERED (ComponentCategoryId),
    INDEX IX_PatientRequest_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_PatientRequest_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE CrossMatchRecord (
    CrossMatchId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    RequestId BIGINT NOT NULL,
    ComponentPrepId BIGINT NOT NULL,
    TestRecordDate DATETIME2 DEFAULT SYSUTCDATETIME(),
    Result NVARCHAR(20),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_CrossMatchRecord PRIMARY KEY CLUSTERED (CrossMatchId),
    INDEX IX_CrossMatchRecord_CenterId NONCLUSTERED (CenterId),
    INDEX IX_CrossMatchRecord_RequestId NONCLUSTERED (RequestId),
    INDEX IX_CrossMatchRecord_ComponentPrepId NONCLUSTERED (ComponentPrepId),
    INDEX IX_CrossMatchRecord_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_CrossMatchRecord_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE ReturnRecord (
    ReturnId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    IssueId BIGINT NOT NULL,
    ReturnRecordDate DATETIME2 DEFAULT SYSUTCDATETIME(),
    ReasonId BIGINT,
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_ReturnRecord PRIMARY KEY CLUSTERED (ReturnId),
    INDEX IX_ReturnRecord_CenterId NONCLUSTERED (CenterId),
    INDEX IX_ReturnRecord_IssueId NONCLUSTERED (IssueId),
    INDEX IX_ReturnRecord_ReasonId NONCLUSTERED (ReasonId),
    INDEX IX_ReturnRecord_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_ReturnRecord_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE ReplacementDonor (
    ReplacementId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    RequestId BIGINT NOT NULL,
    DonorId BIGINT NOT NULL,
    DonationRecordDate DATETIME2 DEFAULT SYSUTCDATETIME(),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_ReplacementDonor PRIMARY KEY CLUSTERED (ReplacementId),
    INDEX IX_ReplacementDonor_CenterId NONCLUSTERED (CenterId),
    INDEX IX_ReplacementDonor_RequestId NONCLUSTERED (RequestId),
    INDEX IX_ReplacementDonor_DonorId NONCLUSTERED (DonorId),
    INDEX IX_ReplacementDonor_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_ReplacementDonor_UpdatedBy NONCLUSTERED (UpdatedBy)
);

-- 8. Billing & Finance
CREATE TABLE ServiceChargeMaster (
    ServiceChargeId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    ComponentCategoryId BIGINT,
    ServiceName NVARCHAR(50),
    Amount DECIMAL(10,2),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_ServiceChargeMaster PRIMARY KEY CLUSTERED (ServiceChargeId),
    INDEX IX_ServiceChargeMaster_CenterId NONCLUSTERED (CenterId),
    INDEX IX_ServiceChargeMaster_ComponentCategoryId NONCLUSTERED (ComponentCategoryId),
    INDEX IX_ServiceChargeMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_ServiceChargeMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE BillingTransaction (
    BillingId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    HospitalId BIGINT,
    InvoiceNumber NVARCHAR(50) NOT NULL,
    BillingRecordDate DATETIME2 DEFAULT SYSUTCDATETIME(),
    TotalAmount DECIMAL(10,2),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_BillingTransaction PRIMARY KEY CLUSTERED (BillingId),
    INDEX IX_BillingTransaction_CenterId NONCLUSTERED (CenterId),
    INDEX IX_BillingTransaction_HospitalId NONCLUSTERED (HospitalId),
    INDEX IX_BillingTransaction_InvoiceNumber NONCLUSTERED (InvoiceNumber),
    INDEX IX_BillingTransaction_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_BillingTransaction_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE InvoiceDetail (
    InvoiceDetailId BIGINT IDENTITY(1,1) NOT NULL,
    BillingId BIGINT NOT NULL,
    ServiceChargeId BIGINT,
    Quantity INT,
    Amount DECIMAL(10,2),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_InvoiceDetail PRIMARY KEY CLUSTERED (InvoiceDetailId),
    INDEX IX_InvoiceDetail_BillingId NONCLUSTERED (BillingId),
    INDEX IX_InvoiceDetail_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_InvoiceDetail_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE PaymentRecord (
    PaymentId BIGINT IDENTITY(1,1) NOT NULL,
    BillingId BIGINT NOT NULL,
    CenterId BIGINT NOT NULL,
    PaymentMode NVARCHAR(20),
    Amount DECIMAL(10,2),
    PaymentRecordDate DATETIME2 DEFAULT SYSUTCDATETIME(),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_PaymentRecord PRIMARY KEY CLUSTERED (PaymentId),
    INDEX IX_PaymentRecord_BillingId NONCLUSTERED (BillingId),
    INDEX IX_PaymentRecord_CenterId NONCLUSTERED (CenterId),
    INDEX IX_PaymentRecord_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_PaymentRecord_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE ExpenseMaster (
    ExpenseId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    ExpenseCategory NVARCHAR(50),
    Amount DECIMAL(10,2),
    ExpenseRecordDate DATE,
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_ExpenseMaster PRIMARY KEY CLUSTERED (ExpenseId),
    INDEX IX_ExpenseMaster_CenterId NONCLUSTERED (CenterId),
    INDEX IX_ExpenseMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_ExpenseMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

-- 9. Reporting & Compliance
CREATE TABLE MonthlyReportLog (
    ReportId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    ReportMonth DATE,
    ReportData NVARCHAR(MAX),
    GeneratedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_MonthlyReportLog PRIMARY KEY CLUSTERED (ReportId),
    INDEX IX_MonthlyReportLog_CenterId NONCLUSTERED (CenterId),
    INDEX IX_MonthlyReportLog_ReportMonth NONCLUSTERED (ReportMonth),
    INDEX IX_MonthlyReportLog_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_MonthlyReportLog_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE ExportFileLog (
    ExportId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    FileCategory NVARCHAR(20),
    FilePath NVARCHAR(255),
    GeneratedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_ExportFileLog PRIMARY KEY CLUSTERED (ExportId),
    INDEX IX_ExportFileLog_CenterId NONCLUSTERED (CenterId),
    INDEX IX_ExportFileLog_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_ExportFileLog_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE DataUploadHistory (
    UploadId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    ReportId BIGINT,
    UploadRecordDate DATETIME2 DEFAULT SYSUTCDATETIME(),
    Status NVARCHAR(20),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_DataUploadHistory PRIMARY KEY CLUSTERED (UploadId),
    INDEX IX_DataUploadHistory_CenterId NONCLUSTERED (CenterId),
    INDEX IX_DataUploadHistory_ReportId NONCLUSTERED (ReportId),
    INDEX IX_DataUploadHistory_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_DataUploadHistory_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE ReportTemplate (
    TemplateId BIGINT IDENTITY(1,1) NOT NULL,
    TemplateName NVARCHAR(100),
    TemplateContent NVARCHAR(MAX),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_ReportTemplate PRIMARY KEY CLUSTERED (TemplateId),
    INDEX IX_ReportTemplate_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_ReportTemplate_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE AnalyticsDashboardData (
    AnalyticsId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    MetricName NVARCHAR(50),
    MetricValue NVARCHAR(MAX),
    GeneratedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_AnalyticsDashboardData PRIMARY KEY CLUSTERED (AnalyticsId),
    INDEX IX_AnalyticsDashboardData_CenterId NONCLUSTERED (CenterId),
    INDEX IX_AnalyticsDashboardData_MetricName NONCLUSTERED (MetricName),
    INDEX IX_AnalyticsDashboardData_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_AnalyticsDashboardData_UpdatedBy NONCLUSTERED (UpdatedBy)
);

-- 10. Communication & Outreach
CREATE TABLE NotificationMaster (
    NotificationId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    NotificationCategory NVARCHAR(20),
    MessageContent NVARCHAR(MAX),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_NotificationMaster PRIMARY KEY CLUSTERED (NotificationId),
    INDEX IX_NotificationMaster_CenterId NONCLUSTERED (CenterId),
    INDEX IX_NotificationMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_NotificationMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE SmsTemplateMaster (
    SmsTemplateId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    TemplateName NVARCHAR(50),
    TemplateContent NVARCHAR(MAX),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_SmsTemplateMaster PRIMARY KEY CLUSTERED (SmsTemplateId),
    INDEX IX_SmsTemplateMaster_CenterId NONCLUSTERED (CenterId),
    INDEX IX_SmsTemplateMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_SmsTemplateMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE EmailTemplateMaster (
    EmailTemplateId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    TemplateName NVARCHAR(50),
    TemplateContent NVARCHAR(MAX),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_EmailTemplateMaster PRIMARY KEY CLUSTERED (EmailTemplateId),
    INDEX IX_EmailTemplateMaster_CenterId NONCLUSTERED (CenterId),
    INDEX IX_EmailTemplateMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_EmailTemplateMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE OutboxLog (
    OutboxId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    RecipientId BIGINT,
    MessageCategory NVARCHAR(20),
    MessageContent NVARCHAR(MAX),
    SentAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_OutboxLog PRIMARY KEY CLUSTERED (OutboxId),
    INDEX IX_OutboxLog_CenterId NONCLUSTERED (CenterId),
    INDEX IX_OutboxLog_RecipientId NONCLUSTERED (RecipientId),
    INDEX IX_OutboxLog_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_OutboxLog_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE FeedbackMaster (
    FeedbackId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    DonorId BIGINT,
    HospitalId BIGINT,
    FeedbackText NVARCHAR(MAX),
    SubmittedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_FeedbackMaster PRIMARY KEY CLUSTERED (FeedbackId),
    INDEX IX_FeedbackMaster_CenterId NONCLUSTERED (CenterId),
    INDEX IX_FeedbackMaster_DonorId NONCLUSTERED (DonorId),
    INDEX IX_FeedbackMaster_HospitalId NONCLUSTERED (HospitalId),
    INDEX IX_FeedbackMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_FeedbackMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE NewsletterSubscription (
    SubscriptionId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    Email NVARCHAR(100),
    SubscribedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_NewsletterSubscription PRIMARY KEY CLUSTERED (SubscriptionId),
    INDEX IX_NewsletterSubscription_CenterId NONCLUSTERED (CenterId),
    INDEX IX_NewsletterSubscription_Email NONCLUSTERED (Email),
    INDEX IX_NewsletterSubscription_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_NewsletterSubscription_UpdatedBy NONCLUSTERED (UpdatedBy)
);

-- 11. System Configuration & Support
CREATE TABLE SystemConfig (
    ConfigId BIGINT IDENTITY(1,1) NOT NULL,
    ConfigKey NVARCHAR(50) NOT NULL,
    ConfigValue NVARCHAR(MAX),
    CenterId BIGINT,
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_SystemConfig PRIMARY KEY CLUSTERED (ConfigId),
    INDEX IX_SystemConfig_CenterId NONCLUSTERED (CenterId),
    INDEX IX_SystemConfig_ConfigKey NONCLUSTERED (ConfigKey),
    INDEX IX_SystemConfig_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_SystemConfig_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE BackupLog (
    BackupId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    BackupTime DATETIME2 DEFAULT SYSUTCDATETIME(),
    BackupPath NVARCHAR(255),
    Status NVARCHAR(20),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_BackupLog PRIMARY KEY CLUSTERED (BackupId),
    INDEX IX_BackupLog_CenterId NONCLUSTERED (CenterId),
    INDEX IX_BackupLog_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_BackupLog_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE ErrorLog (
    ErrorId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT,
    ErrorMessage NVARCHAR(MAX),
    ErrorTime DATETIME2 DEFAULT SYSUTCDATETIME(),
    StackTrace NVARCHAR(MAX),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_ErrorLog PRIMARY KEY CLUSTERED (ErrorId),
    INDEX IX_ErrorLog_CenterId NONCLUSTERED (CenterId),
    INDEX IX_ErrorLog_ErrorTime NONCLUSTERED (ErrorTime),
    INDEX IX_ErrorLog_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_ErrorLog_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE ApiIntegrationMaster (
    ApiIntegrationId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    ApiName NVARCHAR(50),
    ApiKey NVARCHAR(255),
    EndpointUrl NVARCHAR(255),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_ApiIntegrationMaster PRIMARY KEY CLUSTERED (ApiIntegrationId),
    INDEX IX_ApiIntegrationMaster_CenterId NONCLUSTERED (CenterId),
    INDEX IX_ApiIntegrationMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_ApiIntegrationMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE SchedulerJobLog (
    JobId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    JobName NVARCHAR(50),
    ExecutionTime DATETIME2 DEFAULT SYSUTCDATETIME(),
    Status NVARCHAR(20),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_SchedulerJobLog PRIMARY KEY CLUSTERED (JobId),
    INDEX IX_SchedulerJobLog_CenterId NONCLUSTERED (CenterId),
    INDEX IX_SchedulerJobLog_JobName NONCLUSTERED (JobName),
    INDEX IX_SchedulerJobLog_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_SchedulerJobLog_UpdatedBy NONCLUSTERED (UpdatedBy)
);

-- 12. Master & Reference Data
CREATE TABLE StateMaster (
    StateId BIGINT IDENTITY(1,1) NOT NULL,
    StateName NVARCHAR(50) NOT NULL,
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_StateMaster PRIMARY KEY CLUSTERED (StateId),
    INDEX IX_StateMaster_StateName NONCLUSTERED (StateName),
    INDEX IX_StateMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_StateMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE DistrictMaster (
    DistrictId BIGINT IDENTITY(1,1) NOT NULL,
    StateId BIGINT NOT NULL,
    DistrictName NVARCHAR(50) NOT NULL,
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_DistrictMaster PRIMARY KEY CLUSTERED (DistrictId),
    INDEX IX_DistrictMaster_StateId NONCLUSTERED (StateId),
    INDEX IX_DistrictMaster_DistrictName NONCLUSTERED (DistrictName),
    INDEX IX_DistrictMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_DistrictMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE CityMaster (
    CityId BIGINT IDENTITY(1,1) NOT NULL,
    DistrictId BIGINT NOT NULL,
    CityName NVARCHAR(50) NOT NULL,
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_CityMaster PRIMARY KEY CLUSTERED (CityId),
    INDEX IX_CityMaster_DistrictId NONCLUSTERED (DistrictId),
    INDEX IX_CityMaster_CityName NONCLUSTERED (CityName),
    INDEX IX_CityMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_CityMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE PincodeMaster (
    PincodeId BIGINT IDENTITY(1,1) NOT NULL,
    CityId BIGINT NOT NULL,
    Pincode NVARCHAR(10) NOT NULL,
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_PincodeMaster PRIMARY KEY CLUSTERED (PincodeId),
    INDEX IX_PincodeMaster_CityId NONCLUSTERED (CityId),
    INDEX IX_PincodeMaster_Pincode NONCLUSTERED (Pincode),
    INDEX IX_PincodeMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_PincodeMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE BloodGroupMaster (
    BloodGroupId BIGINT IDENTITY(1,1) NOT NULL,
    BloodGroupName NVARCHAR(10) NOT NULL,
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_BloodGroupMaster PRIMARY KEY CLUSTERED (BloodGroupId),
    INDEX IX_BloodGroupMaster_BloodGroupName NONCLUSTERED (BloodGroupName),
    INDEX IX_BloodGroupMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_BloodGroupMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE ComponentCategoryMaster (
    ComponentCategoryId BIGINT IDENTITY(1,1) NOT NULL,
    ComponentName NVARCHAR(50) NOT NULL,
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_ComponentCategoryMaster PRIMARY KEY CLUSTERED (ComponentCategoryId),
    INDEX IX_ComponentCategoryMaster_ComponentName NONCLUSTERED (ComponentName),
    INDEX IX_ComponentCategoryMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_ComponentCategoryMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE ReasonMaster (
    ReasonId BIGINT IDENTITY(1,1) NOT NULL,
    ReasonCategory NVARCHAR(50),
    ReasonDetails NVARCHAR(MAX),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_ReasonMaster PRIMARY KEY CLUSTERED (ReasonId),
    INDEX IX_ReasonMaster_ReasonCategory NONCLUSTERED (ReasonCategory),
    INDEX IX_ReasonMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_ReasonMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE HolidayMaster (
    HolidayId BIGINT IDENTITY(1,1) NOT NULL,
    HolidayRecordDate DATE NOT NULL,
    HolidayName NVARCHAR(50),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_HolidayMaster PRIMARY KEY CLUSTERED (HolidayId),
    INDEX IX_HolidayMaster_HolidayRecordDate NONCLUSTERED (HolidayRecordDate),
    INDEX IX_HolidayMaster_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_HolidayMaster_UpdatedBy NONCLUSTERED (UpdatedBy)
);

-- 13. Emergency & Donation Requests
CREATE TABLE EmergencyRequest (
    EmergencyRequestId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    HospitalId BIGINT,
    BloodGroupId BIGINT,
    ComponentCategoryId BIGINT,
    RequestRecordDate DATETIME2 DEFAULT SYSUTCDATETIME(),
    Status NVARCHAR(20),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_EmergencyRequest PRIMARY KEY CLUSTERED (EmergencyRequestId),
    INDEX IX_EmergencyRequest_CenterId NONCLUSTERED (CenterId),
    INDEX IX_EmergencyRequest_HospitalId NONCLUSTERED (HospitalId),
    INDEX IX_EmergencyRequest_BloodGroupId NONCLUSTERED (BloodGroupId),
    INDEX IX_EmergencyRequest_ComponentCategoryId NONCLUSTERED (ComponentCategoryId),
    INDEX IX_EmergencyRequest_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_EmergencyRequest_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE EmergencyDonorResponse (
    ResponseId BIGINT IDENTITY(1,1) NOT NULL,
    EmergencyRequestId BIGINT NOT NULL,
    DonorId BIGINT NOT NULL,
    CenterId BIGINT NOT NULL,
    ResponseRecordDate DATETIME2 DEFAULT SYSUTCDATETIME(),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_EmergencyDonorResponse PRIMARY KEY CLUSTERED (ResponseId),
    INDEX IX_EmergencyDonorResponse_EmergencyRequestId NONCLUSTERED (EmergencyRequestId),
    INDEX IX_EmergencyDonorResponse_DonorId NONCLUSTERED (DonorId),
    INDEX IX_EmergencyDonorResponse_CenterId NONCLUSTERED (CenterId),
    INDEX IX_EmergencyDonorResponse_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_EmergencyDonorResponse_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE RequestStatusLog (
    StatusLogId BIGINT IDENTITY(1,1) NOT NULL,
    EmergencyRequestId BIGINT NOT NULL,
    CenterId BIGINT NOT NULL,
    Status NVARCHAR(20),
    StatusRecordDate DATETIME2 DEFAULT SYSUTCDATETIME(),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_RequestStatusLog PRIMARY KEY CLUSTERED (StatusLogId),
    INDEX IX_RequestStatusLog_EmergencyRequestId NONCLUSTERED (EmergencyRequestId),
    INDEX IX_RequestStatusLog_CenterId NONCLUSTERED (CenterId),
    INDEX IX_RequestStatusLog_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_RequestStatusLog_UpdatedBy NONCLUSTERED (UpdatedBy)
);

-- 14. Multi-Center & API Integration
CREATE TABLE CenterAppUserMap (
    CenterAppUserMapId BIGINT IDENTITY(1,1) NOT NULL,
    AppUserId BIGINT NOT NULL,
    CenterId BIGINT NOT NULL,
    AssignedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_CenterAppUserMap PRIMARY KEY CLUSTERED (CenterAppUserMapId),
    INDEX IX_CenterAppUserMap_AppUserId NONCLUSTERED (AppUserId),
    INDEX IX_CenterAppUserMap_CenterId NONCLUSTERED (CenterId),
    INDEX IX_CenterAppUserMap_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_CenterAppUserMap_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE CenterConfig (
    CenterConfigId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    ConfigKey NVARCHAR(50) NOT NULL,
    ConfigValue NVARCHAR(MAX),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_CenterConfig PRIMARY KEY CLUSTERED (CenterConfigId),
    INDEX IX_CenterConfig_CenterId NONCLUSTERED (CenterId),
    INDEX IX_CenterConfig_ConfigKey NONCLUSTERED (ConfigKey),
    INDEX IX_CenterConfig_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_CenterConfig_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE PortalUploadQueue (
    UploadQueueId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    ReportId BIGINT,
    DataPayload NVARCHAR(MAX),
    QueueRecordDate DATETIME2 DEFAULT SYSUTCDATETIME(),
    Status NVARCHAR(20),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_PortalUploadQueue PRIMARY KEY CLUSTERED (UploadQueueId),
    INDEX IX_PortalUploadQueue_CenterId NONCLUSTERED (CenterId),
    INDEX IX_PortalUploadQueue_ReportId NONCLUSTERED (ReportId),
    INDEX IX_PortalUploadQueue_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_PortalUploadQueue_UpdatedBy NONCLUSTERED (UpdatedBy)
);

CREATE TABLE ApiResponseLog (
    ApiResponseId BIGINT IDENTITY(1,1) NOT NULL,
    CenterId BIGINT NOT NULL,
    ApiIntegrationId BIGINT,
    ResponseCode NVARCHAR(10),
    ResponseData NVARCHAR(MAX),
    ResponseTime DATETIME2 DEFAULT SYSUTCDATETIME(),
    IsActive BIT,
    CreatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    CreatedBy BIGINT,
    UpdatedAt DATETIME2 DEFAULT SYSUTCDATETIME(),
    UpdatedBy BIGINT,
    CONSTRAINT PK_ApiResponseLog PRIMARY KEY CLUSTERED (ApiResponseId),
    INDEX IX_ApiResponseLog_CenterId NONCLUSTERED (CenterId),
    INDEX IX_ApiResponseLog_ApiIntegrationId NONCLUSTERED (ApiIntegrationId),
    INDEX IX_ApiResponseLog_CreatedBy NONCLUSTERED (CreatedBy),
    INDEX IX_ApiResponseLog_UpdatedBy NONCLUSTERED (UpdatedBy)
);